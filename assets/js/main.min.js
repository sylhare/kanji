var KanjiApp=(()=>{var w=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var ie=Object.prototype.hasOwnProperty;var se=(e,t)=>{for(var o in t)w(e,o,{get:t[o],enumerable:!0})},ce=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of re(t))!ie.call(e,n)&&n!==o&&w(e,n,{get:()=>t[n],enumerable:!(r=oe(t,n))||r.enumerable});return e};var ae=e=>ce(w({},"__esModule",{value:!0}),e);var Ie={};se(Ie,{KanjiApp:()=>ne});function q(e){return e.name.concat(" - ",e.reading," - ",e.meaning)}var B=(e,t)=>e.dataset.frequency-t.dataset.frequency,I=(e,t)=>t.dataset.frequency-e.dataset.frequency,a=(e,t)=>e.dataset.value-t.dataset.value,D=(e,t)=>t.dataset.value-e.dataset.value,j=(e,t)=>e.dataset.category.localeCompare(t.dataset.category),N=(e,t)=>t.dataset.category.localeCompare(e.dataset.category),T=(e,t)=>e.dataset.reading.localeCompare(t.dataset.reading),M=(e,t)=>t.dataset.reading.localeCompare(e.dataset.reading),u=function(e,t,o){return e===o?t:o};function K(e,t=200){let o=!1;return function(...r){o||(o=!0,setTimeout(()=>{e.apply(this,r),o=!1},t))}}function le(e,t=window.innerHeight){return e.top<=t&&e.bottom>=0}function G(e,t=window.innerHeight){let o=e.getBoundingClientRect(),r=le(o,t),n=getComputedStyle(e).display!=="none";return r&&n}function V(e){return{src:e.dataset.src,srcset:e.dataset.srcset}}function H(e,t){return e.filter(o=>o!==t)}function R(e){return e.length===0}var p=[...document.getElementsByClassName("card")],E=document.getElementById("menu-sort"),de=document.getElementById("Number-sort"),ue=document.getElementById("Frequency-sort"),fe=document.getElementById("Category-sort"),pe=document.getElementById("Reading-sort"),l=a;de.addEventListener("click",()=>{g(D,a)});ue.addEventListener("click",()=>{g(B,I)});fe.addEventListener("click",()=>{g(N,j)});pe.addEventListener("click",()=>{g(M,T)});var S=function(){p.sort(l).forEach((e,t)=>{e.style.order=t.toString()})};function g(e,t){l=u(l,e,t),S()}function ge(){f.style.display="none",E.style.display=E.style.display==="flex"?"none":"flex"}var f=document.getElementById("menu-category"),me=document.querySelectorAll(".category-filter"),b=document.getElementsByClassName("footer")[0];function ye(){b.style.display=b.style.display!=="none"?"none":"block"}var xe=function(){p.forEach(e=>{e.style.display="none"})};function he(){ye(),Ee(),E.style.display="none",f.style.display=f.style.display==="flex"?"none":"flex",xe(),l=a,S()}var ve=function(e){typeof filterGraph=="function"&&filterGraph(e),p.filter(t=>t.dataset.category===e).forEach(t=>{t.style.display=t.style.display==="none"?"inline":"none"})};function we(){b.style.display="block",f.style.display="none",p.forEach(e=>{l=a,S(),e.style.display="flex"})}var Ee=function(){me.forEach(function(e){e.checked=!1}),typeof window.graphFilterList!="undefined"&&(window.graphFilterList=[])};function be(e,t){for(var o=e.document||e.ownerDocument,r=o.querySelectorAll(t),n;e;){for(n=r.length-1;n>=0;){if(r.item(n)===e)return e;n-=1}e=e.parentElement}return e}var Te=function(){"use strict";var t=document.querySelectorAll(".modal-button");t.forEach(function(n){n.onclick=function(){console.log("modal");var v=n.getAttribute("data-modal");document.getElementById(v).style.display="block"}});var o=document.querySelectorAll(".close");o.forEach(function(n){n.onclick=function(){console.log("close");var v=be(n,".modal");v.style.display="none"}}),window.onclick=function(n){n.target.className==="modal"&&(console.log("other"),n.target.style.display="none")}}();typeof window!="undefined"&&(window.showSorts=ge,window.showCategories=he,window.show=ve,window.showAll=we);var A=e=>e.frequency/60,U=e=>130/e.frequency>50?50:130/e.frequency,$=e=>e.number/10,X=e=>(215-e.number)/10,Y=e=>10,W=e=>10,J=e=>10,P=e=>10;function Q(e,t){return t.includes(e)?t.filter(o=>o!==e):[...t,e]}var c=window.innerWidth||900,m=900,d,k,y=[],Se=d3.select("#graph-kanji").append("svg").attr("width",c).attr("height",m),C=d3.select("#graph-kanji").append("div").attr("class","tooltip").text("default text to be overridden"),Ye=d3.scaleOrdinal(d3.schemeCategory20),s=Se.append("g").attr("class","nodes").selectAll("g"),x=d3.forceSimulation();d3.json(jsonUrl,function(e,t){if(e)throw e;d=t,k=Object.assign({},{},t),O()});function O(){s=s.data(d.nodes,n=>n.id),s.exit().remove();let e=s.enter().append("g").attr("class","node").on("mouseover",n=>C.style("visibility","visible").text(q(n))).on("mousemove",()=>C.style("top",d3.event.pageY-10+"px").style("left",d3.event.pageX+10+"px")).on("mouseout",()=>C.style("visibility","hidden")),t=e.append("circle").attr("class",function(n){return n.group}).attr("r",z(12)).call(d3.drag().on("start",ke).on("drag",Le).on("end",Fe)),o=e.append("text").attr("class","kanji").attr("x",-8).attr("y",6).text(n=>n.name),r=e.append("title").text(n=>n.name);s=s.merge(e),Oe(),x.alpha(.3).alphaTarget(0).restart()}function Ae(e){y=Q(e,y),Ce(),O()}function Ce(){k.nodes.forEach(function(e){e.isFilteredOut&&!y.includes(e.group)&&(e.isFilteredOut=!1,d.nodes.push(Object.assign({},{},e))),e.isFilteredOut=y.includes(e.group)}),d.nodes=k.nodes.filter(e=>!e.isFilteredOut)}function ke(e){d3.event.active||x.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function Le(e){e.fx=d3.event.x,e.fy=d3.event.y}function Fe(e){d3.event.active||x.alphaTarget(0),e.fx=null,e.fy=null}function Oe(){x.nodes(d.nodes).force("center",d3.forceCenter().x(c/2).y(m/2)).force("link",d3.forceLink()).force("charge",d3.forceManyBodyReuse().strength(.001)).force("collide",d3.forceCollide().strength(1).radius(z(13)).iterations(8)).force("x",d3.forceX().strength(c<700?.2*m/c:.05)).force("y",d3.forceY().strength(c<700?.16*c/m:.05)).on("tick",()=>ze(s))}function ze(e){e.attr("transform",t=>"translate("+t.x+","+t.y+")")}var L=A;function z(e){return function(t){return e+L(t)}}function qe(){d3.selectAll("g").select("circle").attr("r",z(12))}function h(e,t){L=u(L,e,t),O(),qe()}var Z=document.getElementById("Frequency-sort"),_=document.getElementById("Number-sort"),ee=document.getElementById("Category-sort"),te=document.getElementById("Reading-sort");Z&&Z.addEventListener("click",()=>{h(U,A)});_&&_.addEventListener("click",()=>{h(X,$)});ee&&ee.addEventListener("click",()=>{h(J,P)});te&&te.addEventListener("click",()=>{h(Y,W)});document.addEventListener("DOMContentLoaded",function(){let e=[].slice.call(document.querySelectorAll("img.lazy"));if("IntersectionObserver"in window){let t=new IntersectionObserver(function(o,r){o.forEach(function(n){if(n.isIntersecting){let i=n.target;i.src=i.dataset.src,i.srcset=i.dataset.srcset,i.classList.remove("lazy"),t.unobserve(i)}})});e.forEach(function(o){t.observe(o)})}else Be(e)});function Be(e){let t=K(()=>{e.forEach(function(o){if(G(o)){let{src:r,srcset:n}=V(o);o.src=r,o.srcset=n,o.classList.remove("lazy"),e=H(e,o),R(e)&&(document.removeEventListener("scroll",t),window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t))}})},200);document.addEventListener("scroll",t),window.addEventListener("resize",t),window.addEventListener("orientationchange",t)}window.filterGraph=Ae;var ne={version:"2.0.0",initialized:!0};console.log("\u{1F38C} Kanji app modules loaded");typeof window!="undefined"&&(window.KanjiApp=ne);return ae(Ie);})();
//# sourceMappingURL=main.min.js.map

//# sourceMappingURL=main.min.js.map
